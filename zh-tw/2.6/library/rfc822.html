
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="zh_TW">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>18.11. rfc822 — Parse RFC 2822 mail headers &#8212; Python 2.6.9 說明文件</title>
    <link rel="stylesheet" href="../_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    
    <link rel="canonical" href="https://projects.localizethedocs.org/python-docs-l10n/library/rfc822.html" />
    <link rel="search" type="application/opensearchdescription+xml"
          title="在 Python 2.6.9 說明文件 中搜尋"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="關於這些文件" href="../about.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜尋" href="../search.html" />
    <link rel="copyright" title="版權所有" href="../copyright.html" />
    <link rel="next" title="18.12. base64 — RFC 3548: Base16, Base32, Base64 Data Encodings" href="base64.html" />
    <link rel="prev" title="18.10. multifile — Support for files containing distinct parts" href="multifile.html" />
    
    <link rel="canonical" href="https://docs.python.org/3/library/rfc822.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>

    <link rel="shortcut icon" type="image/png" href="../_static/py.png" />
    
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    
     

            <script type="text/javascript" src="../_static/rtd_switcher.js"></script>
            <meta name="readthedocs-addons-api-version" content="1">
            <script type="text/javascript" src="../ltd-provenance.js"></script>
            <script type="text/javascript" src="../ltd-current.js"></script>
            <script type="text/javascript" src="../../../ltd-config.js"></script>
            <script type="text/javascript" src="../../../ltd-flyout.js"></script>

  </head><body>
  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>瀏覽</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="總索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python 模組索引"
             >模組</a> |</li>
        <li class="right" >
          <a href="base64.html" title="18.12. base64 — RFC 3548: Base16, Base32, Base64 Data Encodings"
             accesskey="N">下一頁</a> |</li>
        <li class="right" >
          <a href="multifile.html" title="18.10. multifile — Support for files containing distinct parts"
             accesskey="P">上一頁</a> |</li>

    <li><img src="../_static/py.png" alt=""
             style="vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="https://www.python.org/">Python</a> &#187;</li>
    

          <li id="cpython-language-and-version">
            <a href="../index.html">Python 2.6.9 說明文件</a> &#187;
          </li>

          <li class="nav-item nav-item-1"><a href="index.html" >The Python Standard Library</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="netdata.html" accesskey="U">18. Internet Data Handling</a> &#187;</li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="快速搜尋" type="text" name="q" />
          <input type="submit" value="搜" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-rfc822">
<span id="rfc822-parse-rfc-2822-mail-headers"></span><h1>18.11. <a class="reference internal" href="#module-rfc822" title="rfc822: Parse 2822 style mail messages.(已棄用)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">rfc822</span></code></a> — Parse RFC 2822 mail headers<a class="headerlink" href="#module-rfc822" title="本標題的永久連結">¶</a></h1>
<div class="deprecated">
<p><span class="versionmodified">2.3 版後已棄用: </span>The <a class="reference internal" href="email.html#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> package should be used in preference to the <a class="reference internal" href="#module-rfc822" title="rfc822: Parse 2822 style mail messages.(已棄用)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">rfc822</span></code></a>
module.  This module is present only to maintain backward compatibility, and
has been removed in 3.0.</p>
</div>
<p>This module defines a class, <a class="reference internal" href="#rfc822.Message" title="rfc822.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a>, which represents an 「email
message」 as defined by the Internet standard <span class="target" id="index-0"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2822.html"><strong>RFC 2822</strong></a>. <a class="footnote-reference" href="#id8" id="id1">[1]</a>  Such messages
consist of a collection of message headers, and a message body.  This module
also defines a helper class <a class="reference internal" href="#rfc822.AddressList" title="rfc822.AddressList"><code class="xref py py-class docutils literal notranslate"><span class="pre">AddressList</span></code></a> for parsing <span class="target" id="index-1"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2822.html"><strong>RFC 2822</strong></a>
addresses.  Please refer to the RFC for information on the specific syntax of
<span class="target" id="index-2"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2822.html"><strong>RFC 2822</strong></a> messages.</p>
<p id="index-3">The <a class="reference internal" href="mailbox.html#module-mailbox" title="mailbox: Manipulate mailboxes in various formats"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mailbox</span></code></a> module provides classes  to read mailboxes produced by
various end-user mail programs.</p>
<dl class="class">
<dt id="rfc822.Message">
<em class="property">class </em><code class="descclassname">rfc822.</code><code class="descname">Message</code><span class="sig-paren">(</span><em>file</em><span class="optional">[</span>, <em>seekable</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message" title="本定義的永久連結">¶</a></dt>
<dd><p>A <a class="reference internal" href="#rfc822.Message" title="rfc822.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> instance is instantiated with an input object as parameter.
Message relies only on the input object having a <a class="reference internal" href="readline.html#module-readline" title="readline: GNU readline support for Python. (Unix)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">readline()</span></code></a> method; in
particular, ordinary file objects qualify.  Instantiation reads headers from the
input object up to a delimiter line (normally a blank line) and stores them in
the instance.  The message body, following the headers, is not consumed.</p>
<p>This class can work with any input object that supports a <a class="reference internal" href="readline.html#module-readline" title="readline: GNU readline support for Python. (Unix)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">readline()</span></code></a>
method.  If the input object has seek and tell capability, the
<a class="reference internal" href="#rfc822.Message.rewindbody" title="rfc822.Message.rewindbody"><code class="xref py py-meth docutils literal notranslate"><span class="pre">rewindbody()</span></code></a> method will work; also, illegal lines will be pushed back
onto the input stream.  If the input object lacks seek but has an <code class="xref py py-meth docutils literal notranslate"><span class="pre">unread()</span></code>
method that can push back a line of input, <a class="reference internal" href="#rfc822.Message" title="rfc822.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> will use that to
push back illegal lines.  Thus this class can be used to parse messages coming
from a buffered stream.</p>
<p>The optional <em>seekable</em> argument is provided as a workaround for certain stdio
libraries in which <a href="#id2"><span class="problematic" id="id3">:cfunc:`tell`</span></a> discards buffered data before discovering that
the <a href="#id4"><span class="problematic" id="id5">:cfunc:`lseek`</span></a> system call doesn’t work.  For maximum portability, you
should set the seekable argument to zero to prevent that initial <code class="xref py py-meth docutils literal notranslate"><span class="pre">tell()</span></code>
when passing in an unseekable object such as a file object created from a socket
object.</p>
<p>Input lines as read from the file may either be terminated by CR-LF or by a
single linefeed; a terminating CR-LF is replaced by a single linefeed before the
line is stored.</p>
<p>All header matching is done independent of upper or lower case; e.g.
<code class="docutils literal notranslate"><span class="pre">m['From']</span></code>, <code class="docutils literal notranslate"><span class="pre">m['from']</span></code> and <code class="docutils literal notranslate"><span class="pre">m['FROM']</span></code> all yield the same result.</p>
</dd></dl>

<dl class="class">
<dt id="rfc822.AddressList">
<em class="property">class </em><code class="descclassname">rfc822.</code><code class="descname">AddressList</code><span class="sig-paren">(</span><em>field</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.AddressList" title="本定義的永久連結">¶</a></dt>
<dd><p>You may instantiate the <a class="reference internal" href="#rfc822.AddressList" title="rfc822.AddressList"><code class="xref py py-class docutils literal notranslate"><span class="pre">AddressList</span></code></a> helper class using a single string
parameter, a comma-separated list of <span class="target" id="index-4"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2822.html"><strong>RFC 2822</strong></a> addresses to be parsed.  (The
parameter <code class="docutils literal notranslate"><span class="pre">None</span></code> yields an empty list.)</p>
</dd></dl>

<dl class="function">
<dt id="rfc822.quote">
<code class="descclassname">rfc822.</code><code class="descname">quote</code><span class="sig-paren">(</span><em>str</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.quote" title="本定義的永久連結">¶</a></dt>
<dd><p>Return a new string with backslashes in <em>str</em> replaced by two backslashes and
double quotes replaced by backslash-double quote.</p>
</dd></dl>

<dl class="function">
<dt id="rfc822.unquote">
<code class="descclassname">rfc822.</code><code class="descname">unquote</code><span class="sig-paren">(</span><em>str</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.unquote" title="本定義的永久連結">¶</a></dt>
<dd><p>Return a new string which is an <em>unquoted</em> version of <em>str</em>. If <em>str</em> ends and
begins with double quotes, they are stripped off.  Likewise if <em>str</em> ends and
begins with angle brackets, they are stripped off.</p>
</dd></dl>

<dl class="function">
<dt id="rfc822.parseaddr">
<code class="descclassname">rfc822.</code><code class="descname">parseaddr</code><span class="sig-paren">(</span><em>address</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.parseaddr" title="本定義的永久連結">¶</a></dt>
<dd><p>Parse <em>address</em>, which should be the value of some address-containing field such
as <em class="mailheader">To</em> or <em class="mailheader">Cc</em>, into its constituent 「realname」 and
「email address」 parts. Returns a tuple of that information, unless the parse
fails, in which case a 2-tuple <code class="docutils literal notranslate"><span class="pre">(None,</span> <span class="pre">None)</span></code> is returned.</p>
</dd></dl>

<dl class="function">
<dt id="rfc822.dump_address_pair">
<code class="descclassname">rfc822.</code><code class="descname">dump_address_pair</code><span class="sig-paren">(</span><em>pair</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.dump_address_pair" title="本定義的永久連結">¶</a></dt>
<dd><p>The inverse of <a class="reference internal" href="#rfc822.parseaddr" title="rfc822.parseaddr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parseaddr()</span></code></a>, this takes a 2-tuple of the form <code class="docutils literal notranslate"><span class="pre">(realname,</span>
<span class="pre">email_address)</span></code> and returns the string value suitable for a <em class="mailheader">To</em> or
<em class="mailheader">Cc</em> header.  If the first element of <em>pair</em> is false, then the
second element is returned unmodified.</p>
</dd></dl>

<dl class="function">
<dt id="rfc822.parsedate">
<code class="descclassname">rfc822.</code><code class="descname">parsedate</code><span class="sig-paren">(</span><em>date</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.parsedate" title="本定義的永久連結">¶</a></dt>
<dd><p>Attempts to parse a date according to the rules in <span class="target" id="index-5"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2822.html"><strong>RFC 2822</strong></a>. however, some
mailers don’t follow that format as specified, so <a class="reference internal" href="#rfc822.parsedate" title="rfc822.parsedate"><code class="xref py py-func docutils literal notranslate"><span class="pre">parsedate()</span></code></a> tries to
guess correctly in such cases.  <em>date</em> is a string containing an <span class="target" id="index-6"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2822.html"><strong>RFC 2822</strong></a>
date, such as  <code class="docutils literal notranslate"><span class="pre">'Mon,</span> <span class="pre">20</span> <span class="pre">Nov</span> <span class="pre">1995</span> <span class="pre">19:12:08</span> <span class="pre">-0500'</span></code>.  If it succeeds in parsing
the date, <a class="reference internal" href="#rfc822.parsedate" title="rfc822.parsedate"><code class="xref py py-func docutils literal notranslate"><span class="pre">parsedate()</span></code></a> returns a 9-tuple that can be passed directly to
<a class="reference internal" href="time.html#time.mktime" title="time.mktime"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.mktime()</span></code></a>; otherwise <code class="docutils literal notranslate"><span class="pre">None</span></code> will be returned.  Note that indexes 6,
7, and 8 of the result tuple are not usable.</p>
</dd></dl>

<dl class="function">
<dt id="rfc822.parsedate_tz">
<code class="descclassname">rfc822.</code><code class="descname">parsedate_tz</code><span class="sig-paren">(</span><em>date</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.parsedate_tz" title="本定義的永久連結">¶</a></dt>
<dd><p>Performs the same function as <a class="reference internal" href="#rfc822.parsedate" title="rfc822.parsedate"><code class="xref py py-func docutils literal notranslate"><span class="pre">parsedate()</span></code></a>, but returns either <code class="docutils literal notranslate"><span class="pre">None</span></code> or
a 10-tuple; the first 9 elements make up a tuple that can be passed directly to
<a class="reference internal" href="time.html#time.mktime" title="time.mktime"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.mktime()</span></code></a>, and the tenth is the offset of the date’s timezone from UTC
(which is the official term for Greenwich Mean Time).  (Note that the sign of
the timezone offset is the opposite of the sign of the <code class="docutils literal notranslate"><span class="pre">time.timezone</span></code>
variable for the same timezone; the latter variable follows the POSIX standard
while this module follows <span class="target" id="index-7"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2822.html"><strong>RFC 2822</strong></a>.)  If the input string has no timezone,
the last element of the tuple returned is <code class="docutils literal notranslate"><span class="pre">None</span></code>.  Note that indexes 6, 7, and
8 of the result tuple are not usable.</p>
</dd></dl>

<dl class="function">
<dt id="rfc822.mktime_tz">
<code class="descclassname">rfc822.</code><code class="descname">mktime_tz</code><span class="sig-paren">(</span><em>tuple</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.mktime_tz" title="本定義的永久連結">¶</a></dt>
<dd><p>Turn a 10-tuple as returned by <a class="reference internal" href="#rfc822.parsedate_tz" title="rfc822.parsedate_tz"><code class="xref py py-func docutils literal notranslate"><span class="pre">parsedate_tz()</span></code></a> into a UTC timestamp.  If
the timezone item in the tuple is <code class="docutils literal notranslate"><span class="pre">None</span></code>, assume local time.  Minor
deficiency: this first interprets the first 8 elements as a local time and then
compensates for the timezone difference; this may yield a slight error around
daylight savings time switch dates.  Not enough to worry about for common use.</p>
</dd></dl>

<div class="admonition seealso">
<p class="first admonition-title">也參考</p>
<dl class="last docutils">
<dt>Module <a class="reference internal" href="email.html#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a></dt>
<dd>Comprehensive email handling package; supersedes the <a class="reference internal" href="#module-rfc822" title="rfc822: Parse 2822 style mail messages.(已棄用)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">rfc822</span></code></a> module.</dd>
<dt>Module <a class="reference internal" href="mailbox.html#module-mailbox" title="mailbox: Manipulate mailboxes in various formats"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mailbox</span></code></a></dt>
<dd>Classes to read various mailbox formats produced  by end-user mail programs.</dd>
<dt>Module <a class="reference internal" href="mimetools.html#module-mimetools" title="mimetools: Tools for parsing MIME-style message bodies.(已棄用)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mimetools</span></code></a></dt>
<dd>Subclass of <a class="reference internal" href="#rfc822.Message" title="rfc822.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">rfc822.Message</span></code></a> that handles MIME encoded messages.</dd>
</dl>
</div>
<div class="section" id="message-objects">
<span id="id6"></span><h2>18.11.1. Message Objects<a class="headerlink" href="#message-objects" title="本標題的永久連結">¶</a></h2>
<p>A <a class="reference internal" href="#rfc822.Message" title="rfc822.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> instance has the following methods:</p>
<dl class="method">
<dt id="rfc822.Message.rewindbody">
<code class="descclassname">Message.</code><code class="descname">rewindbody</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.rewindbody" title="本定義的永久連結">¶</a></dt>
<dd><p>Seek to the start of the message body.  This only works if the file object is
seekable.</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.Message.isheader">
<code class="descclassname">Message.</code><code class="descname">isheader</code><span class="sig-paren">(</span><em>line</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.isheader" title="本定義的永久連結">¶</a></dt>
<dd><p>Returns a line’s canonicalized fieldname (the dictionary key that will be used
to index it) if the line is a legal <span class="target" id="index-8"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2822.html"><strong>RFC 2822</strong></a> header; otherwise returns
<code class="docutils literal notranslate"><span class="pre">None</span></code> (implying that parsing should stop here and the line be pushed back on
the input stream).  It is sometimes useful to override this method in a
subclass.</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.Message.islast">
<code class="descclassname">Message.</code><code class="descname">islast</code><span class="sig-paren">(</span><em>line</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.islast" title="本定義的永久連結">¶</a></dt>
<dd><p>Return true if the given line is a delimiter on which Message should stop.  The
delimiter line is consumed, and the file object’s read location positioned
immediately after it.  By default this method just checks that the line is
blank, but you can override it in a subclass.</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.Message.iscomment">
<code class="descclassname">Message.</code><code class="descname">iscomment</code><span class="sig-paren">(</span><em>line</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.iscomment" title="本定義的永久連結">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the given line should be ignored entirely, just skipped. By
default this is a stub that always returns <code class="docutils literal notranslate"><span class="pre">False</span></code>, but you can override it in
a subclass.</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.Message.getallmatchingheaders">
<code class="descclassname">Message.</code><code class="descname">getallmatchingheaders</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.getallmatchingheaders" title="本定義的永久連結">¶</a></dt>
<dd><p>Return a list of lines consisting of all headers matching <em>name</em>, if any.  Each
physical line, whether it is a continuation line or not, is a separate list
item.  Return the empty list if no header matches <em>name</em>.</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.Message.getfirstmatchingheader">
<code class="descclassname">Message.</code><code class="descname">getfirstmatchingheader</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.getfirstmatchingheader" title="本定義的永久連結">¶</a></dt>
<dd><p>Return a list of lines comprising the first header matching <em>name</em>, and its
continuation line(s), if any.  Return <code class="docutils literal notranslate"><span class="pre">None</span></code> if there is no header matching
<em>name</em>.</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.Message.getrawheader">
<code class="descclassname">Message.</code><code class="descname">getrawheader</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.getrawheader" title="本定義的永久連結">¶</a></dt>
<dd><p>Return a single string consisting of the text after the colon in the first
header matching <em>name</em>.  This includes leading whitespace, the trailing
linefeed, and internal linefeeds and whitespace if there any continuation
line(s) were present.  Return <code class="docutils literal notranslate"><span class="pre">None</span></code> if there is no header matching <em>name</em>.</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.Message.getheader">
<code class="descclassname">Message.</code><code class="descname">getheader</code><span class="sig-paren">(</span><em>name</em><span class="optional">[</span>, <em>default</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.getheader" title="本定義的永久連結">¶</a></dt>
<dd><p>Return a single string consisting of the last header matching <em>name</em>,
but strip leading and trailing whitespace.
Internal whitespace is not stripped.  The optional <em>default</em> argument can be
used to specify a different default to be returned when there is no header
matching <em>name</em>; it defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>.
This is the preferred way to get parsed headers.</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.Message.get">
<code class="descclassname">Message.</code><code class="descname">get</code><span class="sig-paren">(</span><em>name</em><span class="optional">[</span>, <em>default</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.get" title="本定義的永久連結">¶</a></dt>
<dd><p>An alias for <a class="reference internal" href="#rfc822.Message.getheader" title="rfc822.Message.getheader"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getheader()</span></code></a>, to make the interface more compatible  with
regular dictionaries.</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.Message.getaddr">
<code class="descclassname">Message.</code><code class="descname">getaddr</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.getaddr" title="本定義的永久連結">¶</a></dt>
<dd><p>Return a pair <code class="docutils literal notranslate"><span class="pre">(full</span> <span class="pre">name,</span> <span class="pre">email</span> <span class="pre">address)</span></code> parsed from the string returned by
<code class="docutils literal notranslate"><span class="pre">getheader(name)</span></code>.  If no header matching <em>name</em> exists, return <code class="docutils literal notranslate"><span class="pre">(None,</span>
<span class="pre">None)</span></code>; otherwise both the full name and the address are (possibly empty)
strings.</p>
<p>Example: If <em>m</em>’s first <em class="mailheader">From</em> header contains the string
<code class="docutils literal notranslate"><span class="pre">'jack&#64;cwi.nl</span> <span class="pre">(Jack</span> <span class="pre">Jansen)'</span></code>, then <code class="docutils literal notranslate"><span class="pre">m.getaddr('From')</span></code> will yield the pair
<code class="docutils literal notranslate"><span class="pre">('Jack</span> <span class="pre">Jansen',</span> <span class="pre">'jack&#64;cwi.nl')</span></code>. If the header contained <code class="docutils literal notranslate"><span class="pre">'Jack</span> <span class="pre">Jansen</span>
<span class="pre">&lt;jack&#64;cwi.nl&gt;'</span></code> instead, it would yield the exact same result.</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.Message.getaddrlist">
<code class="descclassname">Message.</code><code class="descname">getaddrlist</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.getaddrlist" title="本定義的永久連結">¶</a></dt>
<dd><p>This is similar to <code class="docutils literal notranslate"><span class="pre">getaddr(list)</span></code>, but parses a header containing a list of
email addresses (e.g. a <em class="mailheader">To</em> header) and returns a list of <code class="docutils literal notranslate"><span class="pre">(full</span>
<span class="pre">name,</span> <span class="pre">email</span> <span class="pre">address)</span></code> pairs (even if there was only one address in the header).
If there is no header matching <em>name</em>, return an empty list.</p>
<p>If multiple headers exist that match the named header (e.g. if there are several
<em class="mailheader">Cc</em> headers), all are parsed for addresses. Any continuation lines
the named headers contain are also parsed.</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.Message.getdate">
<code class="descclassname">Message.</code><code class="descname">getdate</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.getdate" title="本定義的永久連結">¶</a></dt>
<dd><p>Retrieve a header using <a class="reference internal" href="#rfc822.Message.getheader" title="rfc822.Message.getheader"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getheader()</span></code></a> and parse it into a 9-tuple compatible
with <a class="reference internal" href="time.html#time.mktime" title="time.mktime"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.mktime()</span></code></a>; note that fields 6, 7, and 8  are not usable.  If
there is no header matching <em>name</em>, or it is unparsable, return <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>Date parsing appears to be a black art, and not all mailers adhere to the
standard.  While it has been tested and found correct on a large collection of
email from many sources, it is still possible that this function may
occasionally yield an incorrect result.</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.Message.getdate_tz">
<code class="descclassname">Message.</code><code class="descname">getdate_tz</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.Message.getdate_tz" title="本定義的永久連結">¶</a></dt>
<dd><p>Retrieve a header using <a class="reference internal" href="#rfc822.Message.getheader" title="rfc822.Message.getheader"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getheader()</span></code></a> and parse it into a 10-tuple; the
first 9 elements will make a tuple compatible with <a class="reference internal" href="time.html#time.mktime" title="time.mktime"><code class="xref py py-func docutils literal notranslate"><span class="pre">time.mktime()</span></code></a>, and the
10th is a number giving the offset of the date’s timezone from UTC.  Note that
fields 6, 7, and 8  are not usable.  Similarly to <a class="reference internal" href="#rfc822.Message.getdate" title="rfc822.Message.getdate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getdate()</span></code></a>, if there is
no header matching <em>name</em>, or it is unparsable, return <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

<p><a class="reference internal" href="#rfc822.Message" title="rfc822.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> instances also support a limited mapping interface. In
particular: <code class="docutils literal notranslate"><span class="pre">m[name]</span></code> is like <code class="docutils literal notranslate"><span class="pre">m.getheader(name)</span></code> but raises <a class="reference internal" href="exceptions.html#exceptions.KeyError" title="exceptions.KeyError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyError</span></code></a>
if there is no matching header; and <code class="docutils literal notranslate"><span class="pre">len(m)</span></code>, <code class="docutils literal notranslate"><span class="pre">m.get(name[,</span> <span class="pre">default])</span></code>,
<code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">in</span> <span class="pre">m</span></code>, <code class="docutils literal notranslate"><span class="pre">m.keys()</span></code>, <code class="docutils literal notranslate"><span class="pre">m.values()</span></code> <code class="docutils literal notranslate"><span class="pre">m.items()</span></code>, and
<code class="docutils literal notranslate"><span class="pre">m.setdefault(name[,</span> <span class="pre">default])</span></code> act as expected, with the one difference
that <code class="xref py py-meth docutils literal notranslate"><span class="pre">setdefault()</span></code> uses an empty string as the default value.
<a class="reference internal" href="#rfc822.Message" title="rfc822.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> instances also support the mapping writable interface <code class="docutils literal notranslate"><span class="pre">m[name]</span>
<span class="pre">=</span> <span class="pre">value</span></code> and <code class="docutils literal notranslate"><span class="pre">del</span> <span class="pre">m[name]</span></code>.  <a class="reference internal" href="#rfc822.Message" title="rfc822.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> objects do not support the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">clear()</span></code>, <a class="reference internal" href="copy.html#module-copy" title="copy: Shallow and deep copy operations."><code class="xref py py-meth docutils literal notranslate"><span class="pre">copy()</span></code></a>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">popitem()</span></code>, or <code class="xref py py-meth docutils literal notranslate"><span class="pre">update()</span></code> methods of the
mapping interface.  (Support for <code class="xref py py-meth docutils literal notranslate"><span class="pre">get()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">setdefault()</span></code> was only
added in Python 2.2.)</p>
<p>Finally, <a class="reference internal" href="#rfc822.Message" title="rfc822.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> instances have some public instance variables:</p>
<dl class="attribute">
<dt id="rfc822.Message.headers">
<code class="descclassname">Message.</code><code class="descname">headers</code><a class="headerlink" href="#rfc822.Message.headers" title="本定義的永久連結">¶</a></dt>
<dd><p>A list containing the entire set of header lines, in the order in which they
were read (except that setitem calls may disturb this order). Each line contains
a trailing newline.  The blank line terminating the headers is not contained in
the list.</p>
</dd></dl>

<dl class="attribute">
<dt id="rfc822.Message.fp">
<code class="descclassname">Message.</code><code class="descname">fp</code><a class="headerlink" href="#rfc822.Message.fp" title="本定義的永久連結">¶</a></dt>
<dd><p>The file or file-like object passed at instantiation time.  This can be used to
read the message content.</p>
</dd></dl>

<dl class="attribute">
<dt id="rfc822.Message.unixfrom">
<code class="descclassname">Message.</code><code class="descname">unixfrom</code><a class="headerlink" href="#rfc822.Message.unixfrom" title="本定義的永久連結">¶</a></dt>
<dd><p>The Unix <code class="docutils literal notranslate"><span class="pre">From</span></code> line, if the message had one, or an empty string.  This is
needed to regenerate the message in some contexts, such as an <code class="docutils literal notranslate"><span class="pre">mbox</span></code>-style
mailbox file.</p>
</dd></dl>

</div>
<div class="section" id="addresslist-objects">
<span id="id7"></span><h2>18.11.2. AddressList Objects<a class="headerlink" href="#addresslist-objects" title="本標題的永久連結">¶</a></h2>
<p>An <a class="reference internal" href="#rfc822.AddressList" title="rfc822.AddressList"><code class="xref py py-class docutils literal notranslate"><span class="pre">AddressList</span></code></a> instance has the following methods:</p>
<dl class="method">
<dt id="rfc822.AddressList.__len__">
<code class="descclassname">AddressList.</code><code class="descname">__len__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.AddressList.__len__" title="本定義的永久連結">¶</a></dt>
<dd><p>Return the number of addresses in the address list.</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.AddressList.__str__">
<code class="descclassname">AddressList.</code><code class="descname">__str__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.AddressList.__str__" title="本定義的永久連結">¶</a></dt>
<dd><p>Return a canonicalized string representation of the address list. Addresses are
rendered in 「name」 &lt;<a class="reference external" href="mailto:host&#37;&#52;&#48;domain">host<span>&#64;</span>domain</a>&gt; form, comma-separated.</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.AddressList.__add__">
<code class="descclassname">AddressList.</code><code class="descname">__add__</code><span class="sig-paren">(</span><em>alist</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.AddressList.__add__" title="本定義的永久連結">¶</a></dt>
<dd><p>Return a new <a class="reference internal" href="#rfc822.AddressList" title="rfc822.AddressList"><code class="xref py py-class docutils literal notranslate"><span class="pre">AddressList</span></code></a> instance that contains all addresses in both
<a class="reference internal" href="#rfc822.AddressList" title="rfc822.AddressList"><code class="xref py py-class docutils literal notranslate"><span class="pre">AddressList</span></code></a> operands, with duplicates removed (set union).</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.AddressList.__iadd__">
<code class="descclassname">AddressList.</code><code class="descname">__iadd__</code><span class="sig-paren">(</span><em>alist</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.AddressList.__iadd__" title="本定義的永久連結">¶</a></dt>
<dd><p>In-place version of <a class="reference internal" href="#rfc822.AddressList.__add__" title="rfc822.AddressList.__add__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__add__()</span></code></a>; turns this <a class="reference internal" href="#rfc822.AddressList" title="rfc822.AddressList"><code class="xref py py-class docutils literal notranslate"><span class="pre">AddressList</span></code></a> instance
into the union of itself and the right-hand instance, <em>alist</em>.</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.AddressList.__sub__">
<code class="descclassname">AddressList.</code><code class="descname">__sub__</code><span class="sig-paren">(</span><em>alist</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.AddressList.__sub__" title="本定義的永久連結">¶</a></dt>
<dd><p>Return a new <a class="reference internal" href="#rfc822.AddressList" title="rfc822.AddressList"><code class="xref py py-class docutils literal notranslate"><span class="pre">AddressList</span></code></a> instance that contains every address in the
left-hand <a class="reference internal" href="#rfc822.AddressList" title="rfc822.AddressList"><code class="xref py py-class docutils literal notranslate"><span class="pre">AddressList</span></code></a> operand that is not present in the right-hand
address operand (set difference).</p>
</dd></dl>

<dl class="method">
<dt id="rfc822.AddressList.__isub__">
<code class="descclassname">AddressList.</code><code class="descname">__isub__</code><span class="sig-paren">(</span><em>alist</em><span class="sig-paren">)</span><a class="headerlink" href="#rfc822.AddressList.__isub__" title="本定義的永久連結">¶</a></dt>
<dd><p>In-place version of <a class="reference internal" href="#rfc822.AddressList.__sub__" title="rfc822.AddressList.__sub__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__sub__()</span></code></a>, removing addresses in this list which are
also in <em>alist</em>.</p>
</dd></dl>

<p>Finally, <a class="reference internal" href="#rfc822.AddressList" title="rfc822.AddressList"><code class="xref py py-class docutils literal notranslate"><span class="pre">AddressList</span></code></a> instances have one public instance variable:</p>
<dl class="attribute">
<dt id="rfc822.AddressList.addresslist">
<code class="descclassname">AddressList.</code><code class="descname">addresslist</code><a class="headerlink" href="#rfc822.AddressList.addresslist" title="本定義的永久連結">¶</a></dt>
<dd><p>A list of tuple string pairs, one per address.  In each member, the first is the
canonicalized name part, the second is the actual route-address (<code class="docutils literal notranslate"><span class="pre">'&#64;'</span></code>-separated username-host.domain pair).</p>
</dd></dl>

<p class="rubric">腳註</p>
<table class="docutils footnote" frame="void" id="id8" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>This module originally conformed to <span class="target" id="index-9"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc822.html"><strong>RFC 822</strong></a>, hence the name.  Since then,
<span class="target" id="index-10"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2822.html"><strong>RFC 2822</strong></a> has been released as an update to <span class="target" id="index-11"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc822.html"><strong>RFC 822</strong></a>.  This module should be
considered <span class="target" id="index-12"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2822.html"><strong>RFC 2822</strong></a>-conformant, especially in cases where the syntax or
semantics have changed since <span class="target" id="index-13"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc822.html"><strong>RFC 822</strong></a>.</td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">18.11. <code class="docutils literal notranslate"><span class="pre">rfc822</span></code> — Parse RFC 2822 mail headers</a><ul>
<li><a class="reference internal" href="#message-objects">18.11.1. Message Objects</a></li>
<li><a class="reference internal" href="#addresslist-objects">18.11.2. AddressList Objects</a></li>
</ul>
</li>
</ul>

  <h4>上個主題</h4>
  <p class="topless"><a href="multifile.html"
                        title="上一章">18.10. <code class="docutils literal notranslate"><span class="pre">multifile</span></code> — Support for files containing distinct parts</a></p>
  <h4>下個主題</h4>
  <p class="topless"><a href="base64.html"
                        title="下一章">18.12. <code class="docutils literal notranslate"><span class="pre">base64</span></code> — RFC 3548: Base16, Base32, Base64 Data Encodings</a></p>
  <div role="note" aria-label="source link">
    <h3>本頁</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/library/rfc822.rst.txt"
            rel="nofollow">顯示原始碼</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>快速搜尋</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="搜" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>瀏覽</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="總索引"
             >索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python 模組索引"
             >模組</a> |</li>
        <li class="right" >
          <a href="base64.html" title="18.12. base64 — RFC 3548: Base16, Base32, Base64 Data Encodings"
             >下一頁</a> |</li>
        <li class="right" >
          <a href="multifile.html" title="18.10. multifile — Support for files containing distinct parts"
             >上一頁</a> |</li>

    <li><img src="../_static/py.png" alt=""
             style="vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="https://www.python.org/">Python</a> &#187;</li>
    

          <li id="cpython-language-and-version">
            <a href="../index.html">Python 2.6.9 說明文件</a> &#187;
          </li>

          <li class="nav-item nav-item-1"><a href="index.html" >The Python Standard Library</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="netdata.html" >18. Internet Data Handling</a> &#187;</li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="快速搜尋" type="text" name="q" />
          <input type="submit" value="搜" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">版權所有</a> 1990-2025, Python Software Foundation.
    <br />

    The Python Software Foundation is a non-profit corporation.
<a href="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />

    最後更新於 10月 28, 2025。
    
    <br />

    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.8.4.
    </div>

  </body>
</html>