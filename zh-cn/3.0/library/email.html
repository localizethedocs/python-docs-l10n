
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="zh_CN">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>email — An email and MIME handling package &#8212; Python 3.0.1 文档</title>
    <link rel="stylesheet" href="../_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    
    <link rel="canonical" href="https://projects.localizethedocs.org/python-docs-l10n/library/email.html" />
    <link rel="search" type="application/opensearchdescription+xml"
          title="在 Python 3.0.1 文档 中搜索"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="关于这些文档" href="../about.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="copyright" title="版权所有" href="../copyright.html" />
    <link rel="next" title="email: Representing an email message" href="email.message.html" />
    <link rel="prev" title="Internet Data Handling" href="netdata.html" />
    
    <link rel="canonical" href="https://docs.python.org/3/library/email.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>

    <link rel="shortcut icon" type="image/png" href="../_static/py.png" />
    
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    
     

            <script type="text/javascript" src="../_static/rtd_switcher.js"></script>
            <meta name="readthedocs-addons-api-version" content="1">
            <script type="text/javascript" src="../ltd-provenance.js"></script>
            <script type="text/javascript" src="../ltd-current.js"></script>
            <script type="text/javascript" src="../../../ltd-config.js"></script>
            <script type="text/javascript" src="../../../ltd-flyout.js"></script>

  </head><body>
  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总目录"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python 模块索引"
             >模块</a> |</li>
        <li class="right" >
          <a href="email.message.html" title="email: Representing an email message"
             accesskey="N">下一页</a> |</li>
        <li class="right" >
          <a href="netdata.html" title="Internet Data Handling"
             accesskey="P">上一页</a> |</li>

    <li><img src="../_static/py.png" alt=""
             style="vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="https://www.python.org/">Python</a> &#187;</li>
    

          <li id="cpython-language-and-version">
            <a href="../index.html">Python 3.0.1 文档</a> &#187;
          </li>

          <li class="nav-item nav-item-1"><a href="index.html" >The Python Standard Library</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="netdata.html" accesskey="U">Internet Data Handling</a> &#187;</li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="快速搜索" type="text" name="q" />
          <input type="submit" value="转向" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-email">
<span id="email-an-email-and-mime-handling-package"></span><h1><a class="reference internal" href="#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> — An email and MIME handling package<a class="headerlink" href="#module-email" title="永久链接至标题">¶</a></h1>
<p>The <a class="reference internal" href="#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> package is a library for managing email messages, including
MIME and other <span class="target" id="index-0"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2822.html"><strong>RFC 2822</strong></a>-based message documents.  It is specifically <em>not</em>
designed to do any sending of email messages to SMTP (<span class="target" id="index-1"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2821.html"><strong>RFC 2821</strong></a>), NNTP, or
other servers; those are functions of modules such as <a class="reference internal" href="smtplib.html#module-smtplib" title="smtplib: SMTP protocol client (requires sockets)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">smtplib</span></code></a> and
<a class="reference internal" href="nntplib.html#module-nntplib" title="nntplib: NNTP protocol client (requires sockets)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">nntplib</span></code></a>. The <a class="reference internal" href="#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> package attempts to be as RFC-compliant as
possible, supporting in addition to <span class="target" id="index-2"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2822.html"><strong>RFC 2822</strong></a>, such MIME-related RFCs as
<span class="target" id="index-3"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2045.html"><strong>RFC 2045</strong></a>, <span class="target" id="index-4"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2046.html"><strong>RFC 2046</strong></a>, <span class="target" id="index-5"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2047.html"><strong>RFC 2047</strong></a>, and <span class="target" id="index-6"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2231.html"><strong>RFC 2231</strong></a>.</p>
<p>The primary distinguishing feature of the <a class="reference internal" href="#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> package is that it splits
the parsing and generating of email messages from the internal <em>object model</em>
representation of email.  Applications using the <a class="reference internal" href="#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> package deal
primarily with objects; you can add sub-objects to messages, remove sub-objects
from messages, completely re-arrange the contents, etc.  There is a separate
parser and a separate generator which handles the transformation from flat text
to the object model, and then back to flat text again.  There are also handy
subclasses for some common MIME object types, and a few miscellaneous utilities
that help with such common tasks as extracting and parsing message field values,
creating RFC-compliant dates, etc.</p>
<p>The following sections describe the functionality of the <a class="reference internal" href="#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> package.
The ordering follows a progression that should be common in applications: an
email message is read as flat text from a file or other source, the text is
parsed to produce the object structure of the email message, this structure is
manipulated, and finally, the object tree is rendered back into flat text.</p>
<p>It is perfectly feasible to create the object structure out of whole cloth —
i.e. completely from scratch.  From there, a similar progression can be taken as
above.</p>
<p>Also included are detailed specifications of all the classes and modules that
the <a class="reference internal" href="#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> package provides, the exception classes you might encounter
while using the <a class="reference internal" href="#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> package, some auxiliary utilities, and a few
examples.  For users of the older <code class="xref py py-mod docutils literal notranslate"><span class="pre">mimelib</span></code> package, or previous versions
of the <a class="reference internal" href="#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> package, a section on differences and porting is provided.</p>
<p>Contents of the <a class="reference internal" href="#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> package documentation:</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="email.message.html"><code class="docutils literal notranslate"><span class="pre">email</span></code>: Representing an email message</a></li>
<li class="toctree-l1"><a class="reference internal" href="email.parser.html"><code class="docutils literal notranslate"><span class="pre">email</span></code>: Parsing email messages</a><ul>
<li class="toctree-l2"><a class="reference internal" href="email.parser.html#feedparser-api">FeedParser API</a></li>
<li class="toctree-l2"><a class="reference internal" href="email.parser.html#parser-class-api">Parser class API</a></li>
<li class="toctree-l2"><a class="reference internal" href="email.parser.html#additional-notes">Additional notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="email.generator.html"><code class="docutils literal notranslate"><span class="pre">email</span></code>: Generating MIME documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="email.mime.html"><code class="docutils literal notranslate"><span class="pre">email</span></code>: Creating email and MIME objects from scratch</a></li>
<li class="toctree-l1"><a class="reference internal" href="email.header.html"><code class="docutils literal notranslate"><span class="pre">email</span></code>: Internationalized headers</a></li>
<li class="toctree-l1"><a class="reference internal" href="email.charset.html"><code class="docutils literal notranslate"><span class="pre">email</span></code>: Representing character sets</a></li>
<li class="toctree-l1"><a class="reference internal" href="email.encoders.html"><code class="docutils literal notranslate"><span class="pre">email</span></code>: Encoders</a></li>
<li class="toctree-l1"><a class="reference internal" href="email.errors.html"><code class="docutils literal notranslate"><span class="pre">email</span></code>: Exception and Defect classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="email.util.html"><code class="docutils literal notranslate"><span class="pre">email</span></code>: Miscellaneous utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="email.iterators.html"><code class="docutils literal notranslate"><span class="pre">email</span></code>: Iterators</a></li>
<li class="toctree-l1"><a class="reference internal" href="email-examples.html"><code class="docutils literal notranslate"><span class="pre">email</span></code>: Examples</a></li>
</ul>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参见</p>
<dl class="last docutils">
<dt>Module <a class="reference internal" href="smtplib.html#module-smtplib" title="smtplib: SMTP protocol client (requires sockets)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">smtplib</span></code></a></dt>
<dd>SMTP protocol client</dd>
<dt>Module <a class="reference internal" href="nntplib.html#module-nntplib" title="nntplib: NNTP protocol client (requires sockets)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">nntplib</span></code></a></dt>
<dd>NNTP protocol client</dd>
</dl>
</div>
<div class="section" id="package-history">
<span id="email-pkg-history"></span><h2>Package History<a class="headerlink" href="#package-history" title="永久链接至标题">¶</a></h2>
<p>This table describes the release history of the email package, corresponding to
the version of Python that the package was released with.  For purposes of this
document, when you see a note about change or added versions, these refer to the
Python version the change was made in, <em>not</em> the email package version.  This
table also describes the Python compatibility of each version of the package.</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="44%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">email version</th>
<th class="head">distributed with</th>
<th class="head">compatible with</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="xref py py-const docutils literal notranslate"><span class="pre">1.x</span></code></td>
<td>Python 2.2.0 to Python 2.2.1</td>
<td><em>no longer supported</em></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-const docutils literal notranslate"><span class="pre">2.5</span></code></td>
<td>Python 2.2.2+ and Python 2.3</td>
<td>Python 2.1 to 2.5</td>
</tr>
<tr class="row-even"><td><code class="xref py py-const docutils literal notranslate"><span class="pre">3.0</span></code></td>
<td>Python 2.4</td>
<td>Python 2.3 to 2.5</td>
</tr>
<tr class="row-odd"><td><code class="xref py py-const docutils literal notranslate"><span class="pre">4.0</span></code></td>
<td>Python 2.5</td>
<td>Python 2.3 to 2.5</td>
</tr>
</tbody>
</table>
<p>Here are the major differences between <a class="reference internal" href="#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> version 4 and version 3:</p>
<ul>
<li><p class="first">All modules have been renamed according to <span class="target" id="index-7"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0008"><strong>PEP 8</strong></a> standards.  For example,
the version 3 module <code class="xref py py-mod docutils literal notranslate"><span class="pre">email.Message</span></code> was renamed to <a class="reference internal" href="email.message.html#module-email.message" title="email.message: The base class representing email messages."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email.message</span></code></a> in
version 4.</p>
</li>
<li><p class="first">A new subpackage <a class="reference internal" href="email.mime.html#module-email.mime" title="email.mime: Build MIME messages."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email.mime</span></code></a> was added and all the version 3
<code class="xref py py-mod docutils literal notranslate"><span class="pre">email.MIME*</span></code> modules were renamed and situated into the <a class="reference internal" href="email.mime.html#module-email.mime" title="email.mime: Build MIME messages."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email.mime</span></code></a>
subpackage.  For example, the version 3 module <code class="xref py py-mod docutils literal notranslate"><span class="pre">email.MIMEText</span></code> was renamed
to <code class="xref py py-mod docutils literal notranslate"><span class="pre">email.mime.text</span></code>.</p>
<p><em>Note that the version 3 names will continue to work until Python 2.6</em>.</p>
</li>
<li><p class="first">The <code class="xref py py-mod docutils literal notranslate"><span class="pre">email.mime.application</span></code> module was added, which contains the
<code class="xref py py-class docutils literal notranslate"><span class="pre">MIMEApplication</span></code> class.</p>
</li>
<li><p class="first">Methods that were deprecated in version 3 have been removed.  These include
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Generator.__call__()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">Message.get_type()</span></code>,
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Message.get_main_type()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">Message.get_subtype()</span></code>.</p>
</li>
<li><p class="first">Fixes have been added for <span class="target" id="index-8"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2231.html"><strong>RFC 2231</strong></a> support which can change some of the
return types for <code class="xref py py-func docutils literal notranslate"><span class="pre">Message.get_param()</span></code> and friends.  Under some
circumstances, values which used to return a 3-tuple now return simple strings
(specifically, if all extended parameter segments were unencoded, there is no
language and charset designation expected, so the return type is now a simple
string).  Also, %-decoding used to be done for both encoded and unencoded
segments; this decoding is now done only for encoded segments.</p>
</li>
</ul>
<p>Here are the major differences between <a class="reference internal" href="#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> version 3 and version 2:</p>
<ul class="simple">
<li>The <code class="xref py py-class docutils literal notranslate"><span class="pre">FeedParser</span></code> class was introduced, and the <code class="xref py py-class docutils literal notranslate"><span class="pre">Parser</span></code> class
was implemented in terms of the <code class="xref py py-class docutils literal notranslate"><span class="pre">FeedParser</span></code>.  All parsing therefore is
non-strict, and parsing will make a best effort never to raise an exception.
Problems found while parsing messages are stored in the message’s <em>defect</em>
attribute.</li>
<li>All aspects of the API which raised <a class="reference internal" href="exceptions.html#exceptions.DeprecationWarning" title="exceptions.DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a>s in version 2
have been removed.  These include the <em>_encoder</em> argument to the
<code class="xref py py-class docutils literal notranslate"><span class="pre">MIMEText</span></code> constructor, the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Message.add_payload()</span></code> method, the
<code class="xref py py-func docutils literal notranslate"><span class="pre">Utils.dump_address_pair()</span></code> function, and the functions <code class="xref py py-func docutils literal notranslate"><span class="pre">Utils.decode()</span></code>
and <code class="xref py py-func docutils literal notranslate"><span class="pre">Utils.encode()</span></code>.</li>
<li>New <a class="reference internal" href="exceptions.html#exceptions.DeprecationWarning" title="exceptions.DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a>s have been added to:
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Generator.__call__()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">Message.get_type()</span></code>,
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Message.get_main_type()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">Message.get_subtype()</span></code>, and the <em>strict</em>
argument to the <code class="xref py py-class docutils literal notranslate"><span class="pre">Parser</span></code> class.  These are expected to be removed in
future versions.</li>
<li>Support for Pythons earlier than 2.3 has been removed.</li>
</ul>
<p>Here are the differences between <a class="reference internal" href="#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> version 2 and version 1:</p>
<ul>
<li><p class="first">The <code class="xref py py-mod docutils literal notranslate"><span class="pre">email.Header</span></code> and <code class="xref py py-mod docutils literal notranslate"><span class="pre">email.Charset</span></code> modules have been added.</p>
</li>
<li><p class="first">The pickle format for <code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code> instances has changed. Since this was
never (and still isn’t) formally defined, this isn’t considered a backward
incompatibility.  However if your application pickles and unpickles
<code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code> instances, be aware that in <a class="reference internal" href="#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> version 2,
<code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code> instances now have private variables <em>_charset</em> and
<em>_default_type</em>.</p>
</li>
<li><p class="first">Several methods in the <code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code> class have been deprecated, or their
signatures changed.  Also, many new methods have been added.  See the
documentation for the <code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code> class for details.  The changes should be
completely backward compatible.</p>
</li>
<li><p class="first">The object structure has changed in the face of <em class="mimetype">message/rfc822</em>
content types.  In <a class="reference internal" href="#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> version 1, such a type would be represented by a
scalar payload, i.e. the container message’s <code class="xref py py-meth docutils literal notranslate"><span class="pre">is_multipart()</span></code> returned
false, <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_payload()</span></code> was not a list object, but a single <code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code>
instance.</p>
<p>This structure was inconsistent with the rest of the package, so the object
representation for <em class="mimetype">message/rfc822</em> content types was changed.  In
<a class="reference internal" href="#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> version 2, the container <em>does</em> return <code class="docutils literal notranslate"><span class="pre">True</span></code> from
<code class="xref py py-meth docutils literal notranslate"><span class="pre">is_multipart()</span></code>, and <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_payload()</span></code> returns a list containing a single
<code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code> item.</p>
<p>Note that this is one place that backward compatibility could not be completely
maintained.  However, if you’re already testing the return type of
<code class="xref py py-meth docutils literal notranslate"><span class="pre">get_payload()</span></code>, you should be fine.  You just need to make sure your code
doesn’t do a <code class="xref py py-meth docutils literal notranslate"><span class="pre">set_payload()</span></code> with a <code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code> instance on a container
with a content type of <em class="mimetype">message/rfc822</em>.</p>
</li>
<li><p class="first">The <code class="xref py py-class docutils literal notranslate"><span class="pre">Parser</span></code> constructor’s <em>strict</em> argument was added, and its
<code class="xref py py-meth docutils literal notranslate"><span class="pre">parse()</span></code> and <code class="xref py py-meth docutils literal notranslate"><span class="pre">parsestr()</span></code> methods grew a <em>headersonly</em> argument.  The
<em>strict</em> flag was also added to functions <a class="reference internal" href="email.parser.html#email.message_from_file" title="email.message_from_file"><code class="xref py py-func docutils literal notranslate"><span class="pre">email.message_from_file()</span></code></a> and
<a class="reference internal" href="email.parser.html#email.message_from_string" title="email.message_from_string"><code class="xref py py-func docutils literal notranslate"><span class="pre">email.message_from_string()</span></code></a>.</p>
</li>
<li><p class="first"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Generator.__call__()</span></code> is deprecated; use <code class="xref py py-meth docutils literal notranslate"><span class="pre">Generator.flatten()</span></code>
instead.  The <code class="xref py py-class docutils literal notranslate"><span class="pre">Generator</span></code> class has also grown the <code class="xref py py-meth docutils literal notranslate"><span class="pre">clone()</span></code> method.</p>
</li>
<li><p class="first">The <code class="xref py py-class docutils literal notranslate"><span class="pre">DecodedGenerator</span></code> class in the <code class="xref py py-mod docutils literal notranslate"><span class="pre">email.Generator</span></code> module was
added.</p>
</li>
<li><p class="first">The intermediate base classes <code class="xref py py-class docutils literal notranslate"><span class="pre">MIMENonMultipart</span></code> and
<code class="xref py py-class docutils literal notranslate"><span class="pre">MIMEMultipart</span></code> have been added, and interposed in the class hierarchy
for most of the other MIME-related derived classes.</p>
</li>
<li><p class="first">The <em>_encoder</em> argument to the <code class="xref py py-class docutils literal notranslate"><span class="pre">MIMEText</span></code> constructor has been
deprecated.  Encoding  now happens implicitly based on the <em>_charset</em> argument.</p>
</li>
<li><p class="first">The following functions in the <code class="xref py py-mod docutils literal notranslate"><span class="pre">email.Utils</span></code> module have been deprecated:
<code class="xref py py-func docutils literal notranslate"><span class="pre">dump_address_pairs()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">decode()</span></code>, and <code class="xref py py-func docutils literal notranslate"><span class="pre">encode()</span></code>.  The following
functions have been added to the module: <code class="xref py py-func docutils literal notranslate"><span class="pre">make_msgid()</span></code>,
<code class="xref py py-func docutils literal notranslate"><span class="pre">decode_rfc2231()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">encode_rfc2231()</span></code>, and <code class="xref py py-func docutils literal notranslate"><span class="pre">decode_params()</span></code>.</p>
</li>
<li><p class="first">The non-public function <code class="xref py py-func docutils literal notranslate"><span class="pre">email.Iterators._structure()</span></code> was added.</p>
</li>
</ul>
</div>
<div class="section" id="differences-from-mimelib">
<h2>Differences from <code class="xref py py-mod docutils literal notranslate"><span class="pre">mimelib</span></code><a class="headerlink" href="#differences-from-mimelib" title="永久链接至标题">¶</a></h2>
<p>The <a class="reference internal" href="#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> package was originally prototyped as a separate library called
<a class="reference external" href="http://mimelib.sf.net/">mimelib</a>. Changes have been made so that method names
are more consistent, and some methods or modules have either been added or
removed.  The semantics of some of the methods have also changed.  For the most
part, any functionality available in <code class="xref py py-mod docutils literal notranslate"><span class="pre">mimelib</span></code> is still available in the
<a class="reference internal" href="#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> package, albeit often in a different way.  Backward compatibility
between the <code class="xref py py-mod docutils literal notranslate"><span class="pre">mimelib</span></code> package and the <a class="reference internal" href="#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> package was not a
priority.</p>
<p>Here is a brief description of the differences between the <code class="xref py py-mod docutils literal notranslate"><span class="pre">mimelib</span></code> and
the <a class="reference internal" href="#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> packages, along with hints on how to port your applications.</p>
<p>Of course, the most visible difference between the two packages is that the
package name has been changed to <a class="reference internal" href="#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages, including MIME documents."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a>.  In addition, the top-level
package has the following differences:</p>
<ul class="simple">
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">messageFromString()</span></code> has been renamed to <a class="reference internal" href="email.parser.html#email.message_from_string" title="email.message_from_string"><code class="xref py py-func docutils literal notranslate"><span class="pre">message_from_string()</span></code></a>.</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">messageFromFile()</span></code> has been renamed to <a class="reference internal" href="email.parser.html#email.message_from_file" title="email.message_from_file"><code class="xref py py-func docutils literal notranslate"><span class="pre">message_from_file()</span></code></a>.</li>
</ul>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code> class has the following differences:</p>
<ul class="simple">
<li>The method <code class="xref py py-meth docutils literal notranslate"><span class="pre">asString()</span></code> was renamed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">as_string()</span></code>.</li>
<li>The method <code class="xref py py-meth docutils literal notranslate"><span class="pre">ismultipart()</span></code> was renamed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">is_multipart()</span></code>.</li>
<li>The <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_payload()</span></code> method has grown a <em>decode</em> optional argument.</li>
<li>The method <code class="xref py py-meth docutils literal notranslate"><span class="pre">getall()</span></code> was renamed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_all()</span></code>.</li>
<li>The method <code class="xref py py-meth docutils literal notranslate"><span class="pre">addheader()</span></code> was renamed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">add_header()</span></code>.</li>
<li>The method <code class="xref py py-meth docutils literal notranslate"><span class="pre">gettype()</span></code> was renamed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_type()</span></code>.</li>
<li>The method <code class="xref py py-meth docutils literal notranslate"><span class="pre">getmaintype()</span></code> was renamed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_main_type()</span></code>.</li>
<li>The method <code class="xref py py-meth docutils literal notranslate"><span class="pre">getsubtype()</span></code> was renamed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_subtype()</span></code>.</li>
<li>The method <code class="xref py py-meth docutils literal notranslate"><span class="pre">getparams()</span></code> was renamed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_params()</span></code>. Also, whereas
<code class="xref py py-meth docutils literal notranslate"><span class="pre">getparams()</span></code> returned a list of strings, <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_params()</span></code> returns a list
of 2-tuples, effectively the key/value pairs of the parameters, split on the
<code class="docutils literal notranslate"><span class="pre">'='</span></code> sign.</li>
<li>The method <code class="xref py py-meth docutils literal notranslate"><span class="pre">getparam()</span></code> was renamed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_param()</span></code>.</li>
<li>The method <code class="xref py py-meth docutils literal notranslate"><span class="pre">getcharsets()</span></code> was renamed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_charsets()</span></code>.</li>
<li>The method <code class="xref py py-meth docutils literal notranslate"><span class="pre">getfilename()</span></code> was renamed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_filename()</span></code>.</li>
<li>The method <code class="xref py py-meth docutils literal notranslate"><span class="pre">getboundary()</span></code> was renamed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_boundary()</span></code>.</li>
<li>The method <code class="xref py py-meth docutils literal notranslate"><span class="pre">setboundary()</span></code> was renamed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">set_boundary()</span></code>.</li>
<li>The method <code class="xref py py-meth docutils literal notranslate"><span class="pre">getdecodedpayload()</span></code> was removed.  To get similar
functionality, pass the value 1 to the <em>decode</em> flag of the get_payload()
method.</li>
<li>The method <code class="xref py py-meth docutils literal notranslate"><span class="pre">getpayloadastext()</span></code> was removed.  Similar functionality is
supported by the <code class="xref py py-class docutils literal notranslate"><span class="pre">DecodedGenerator</span></code> class in the <a class="reference internal" href="email.generator.html#module-email.generator" title="email.generator: Generate flat text email messages from a message structure."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email.generator</span></code></a>
module.</li>
<li>The method <code class="xref py py-meth docutils literal notranslate"><span class="pre">getbodyastext()</span></code> was removed.  You can get similar
functionality by creating an iterator with <code class="xref py py-func docutils literal notranslate"><span class="pre">typed_subpart_iterator()</span></code> in the
<a class="reference internal" href="email.iterators.html#module-email.iterators" title="email.iterators: Iterate over a  message object tree."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email.iterators</span></code></a> module.</li>
</ul>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Parser</span></code> class has no differences in its public interface. It does
have some additional smarts to recognize <em class="mimetype">message/delivery-status</em>
type messages, which it represents as a <code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code> instance containing
separate <code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code> subparts for each header block in the delivery status
notification <a class="footnote-reference" href="#id2" id="id1">[1]</a>.</p>
<p>The <code class="xref py py-class docutils literal notranslate"><span class="pre">Generator</span></code> class has no differences in its public interface.  There
is a new class in the <a class="reference internal" href="email.generator.html#module-email.generator" title="email.generator: Generate flat text email messages from a message structure."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email.generator</span></code></a> module though, called
<code class="xref py py-class docutils literal notranslate"><span class="pre">DecodedGenerator</span></code> which provides most of the functionality previously
available in the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Message.getpayloadastext()</span></code> method.</p>
<p>The following modules and classes have been changed:</p>
<ul>
<li><p class="first">The <code class="xref py py-class docutils literal notranslate"><span class="pre">MIMEBase</span></code> class constructor arguments <em>_major</em> and <em>_minor</em> have
changed to <em>_maintype</em> and <em>_subtype</em> respectively.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">Image</span></code> class/module has been renamed to <code class="docutils literal notranslate"><span class="pre">MIMEImage</span></code>.  The <em>_minor</em>
argument has been renamed to <em>_subtype</em>.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">Text</span></code> class/module has been renamed to <code class="docutils literal notranslate"><span class="pre">MIMEText</span></code>.  The <em>_minor</em>
argument has been renamed to <em>_subtype</em>.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">MessageRFC822</span></code> class/module has been renamed to <code class="docutils literal notranslate"><span class="pre">MIMEMessage</span></code>.  Note
that an earlier version of <code class="xref py py-mod docutils literal notranslate"><span class="pre">mimelib</span></code> called this class/module <code class="docutils literal notranslate"><span class="pre">RFC822</span></code>,
but that clashed with the Python standard library module <code class="xref py py-mod docutils literal notranslate"><span class="pre">rfc822</span></code> on some
case-insensitive file systems.</p>
<p>Also, the <code class="xref py py-class docutils literal notranslate"><span class="pre">MIMEMessage</span></code> class now represents any kind of MIME message
with main type <em class="mimetype">message</em>.  It takes an optional argument <em>_subtype</em>
which is used to set the MIME subtype.  <em>_subtype</em> defaults to
<em class="mimetype">rfc822</em>.</p>
</li>
</ul>
<p><code class="xref py py-mod docutils literal notranslate"><span class="pre">mimelib</span></code> provided some utility functions in its <code class="xref py py-mod docutils literal notranslate"><span class="pre">address</span></code> and
<code class="xref py py-mod docutils literal notranslate"><span class="pre">date</span></code> modules.  All of these functions have been moved to the
<a class="reference internal" href="email.util.html#module-email.utils" title="email.utils: Miscellaneous email package utilities."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email.utils</span></code></a> module.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">MsgReader</span></code> class/module has been removed.  Its functionality is most
closely supported in the <code class="xref py py-func docutils literal notranslate"><span class="pre">body_line_iterator()</span></code> function in the
<a class="reference internal" href="email.iterators.html#module-email.iterators" title="email.iterators: Iterate over a  message object tree."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email.iterators</span></code></a> module.</p>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>Delivery Status Notifications (DSN) are defined in <span class="target" id="index-9"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc1894.html"><strong>RFC 1894</strong></a>.</td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">email</span></code> — An email and MIME handling package</a><ul>
<li><a class="reference internal" href="#package-history">Package History</a></li>
<li><a class="reference internal" href="#differences-from-mimelib">Differences from <code class="docutils literal notranslate"><span class="pre">mimelib</span></code></a></li>
</ul>
</li>
</ul>

  <h4>上一个主题</h4>
  <p class="topless"><a href="netdata.html"
                        title="上一章">Internet Data Handling</a></p>
  <h4>下一个主题</h4>
  <p class="topless"><a href="email.message.html"
                        title="下一章"><code class="docutils literal notranslate"><span class="pre">email</span></code>: Representing an email message</a></p>
  <div role="note" aria-label="source link">
    <h3>本页</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/library/email.rst.txt"
            rel="nofollow">显示源代码</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="转向" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="总目录"
             >索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python 模块索引"
             >模块</a> |</li>
        <li class="right" >
          <a href="email.message.html" title="email: Representing an email message"
             >下一页</a> |</li>
        <li class="right" >
          <a href="netdata.html" title="Internet Data Handling"
             >上一页</a> |</li>

    <li><img src="../_static/py.png" alt=""
             style="vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="https://www.python.org/">Python</a> &#187;</li>
    

          <li id="cpython-language-and-version">
            <a href="../index.html">Python 3.0.1 文档</a> &#187;
          </li>

          <li class="nav-item nav-item-1"><a href="index.html" >The Python Standard Library</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="netdata.html" >Internet Data Handling</a> &#187;</li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="快速搜索" type="text" name="q" />
          <input type="submit" value="转向" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">版权所有</a> 1990-2025, Python Software Foundation.
    <br />

    The Python Software Foundation is a non-profit corporation.
<a href="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />

    最后更新于 10月 29, 2025.
    
    <br />

    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.8.4.
    </div>

  </body>
</html>